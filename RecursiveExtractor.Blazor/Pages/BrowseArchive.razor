@page "/Browse"
@using System.Text;
@using MoreLinq;
@using System.Text.RegularExpressions;
@inject Blazored.LocalStorage.ILocalStorageService localStorage;
@inject RecursiveExtractor.Blazor.Services.AppData appData;

Regex to match File Paths against<br/>
<input @bind="CurrentString" />

Files matching filter:<br/>

@foreach (var file in appData.GuidToFileEntryMap.Where(x => filter.IsMatch(x.Value.FullPath)))
{
    <span>Found: <a href="/ViewFile/@file.Key">@file.Value.FullPath</a></span>
}

@code {
    protected static Regex DefaultRegex = new Regex(".*", RegexOptions.Compiled);
    protected Regex filter = DefaultRegex;
    private string _string = "";
    private string CurrentString
    {
        get
        {
            return _string;
        }
        set
        {
            _string = value;
            if (_string != string.Empty)
            {
                filter = new Regex(_string);
            }
            else
            {
                filter = DefaultRegex;
            }
        }
    }
    @*protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {

        }
    }*@
}